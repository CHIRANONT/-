<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Badminton Home</title>
</head>
<body>
    <h1>üè∏ Badminton Match Manager</h1>

    <a href="/setup">‚öôÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≠‡∏£‡πå‡∏ó/‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</a> |
    <a href="/summary">üìÑ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</a> |
    <a href="/result_log">üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏°‡∏ï‡∏ä‡πå</a>

    <h2>‡∏Ñ‡∏≠‡∏£‡πå‡∏ó‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Ç‡πà‡∏á</h2>
    {% for court in courts %}
        <h3>{{ court.court_name }}</h3>

        {% if court.match_in_progress %}
            <p>üéØ ‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà!</p>
            <form action="/end_match/{{ court.court_name }}" method="post">
                <button type="submit">‡∏à‡∏ö‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏ô‡∏µ‡πâ</button>
            </form>
            <ul>
                {% for player in court.now_playing %}
                    <li>{{ player.name }}</li>
                {% endfor %}
            </ul>

        {% elif court.now_playing %}
            <p>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°:</p>
            <ul>
                {% for player in court.now_playing %}
                    <li>{{ player.name }}</li>
                {% endfor %}
            </ul>
            <form action="/start_match/{{ court.court_name }}" method="post">
                <button type="submit">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏ô‡∏µ‡πâ</button>
            </form>

        {% else %}
            {% if waiting_queue %}
                <form action="/start_match/{{ court.court_name }}" method="post">
                    <button type="submit">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠</button>
                </form>
            {% else %}
                <p>‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏≠</p>
            {% endif %}
        {% endif %}
        <br>
    {% endfor %}

    <h2>‡∏ä‡∏∏‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡πÅ‡∏Ç‡πà‡∏á</h2>
    {% for group in waiting_queue %}
        {% set idx = loop.index0 %}
        <p>‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà {{ idx + 1 }}: ‡∏ó‡∏µ‡∏° A ({{ group.team_a[0] }} + {{ group.team_a[1] }}) vs ‡∏ó‡∏µ‡∏° B ({{ group.team_b[0] }} + {{ group.team_b[1] }})
        <form action="/delete_waiting/{{ idx }}" method="post" style="display:inline;">
            <button type="submit">‡∏•‡∏ö‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ</button>
        </form>
        </p>
    {% endfor %}

    <h2>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</h2>
    <ul>
    {% for player in waiting_players %}
        <li>{{ player.name }} (‡∏û‡∏±‡∏Å‡∏°‡∏≤ {{ player.rest_time }} ‡∏ô‡∏≤‡∏ó‡∏µ)</li>
    {% endfor %}
    </ul>

    <form action="/add_waiting" method="get">
        <button type="submit">‚ûï ‡∏à‡∏±‡∏î‡∏ä‡∏∏‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏≠</button>
    </form>
</body>
</html>
